{% extends "base.html" %}

{% block content %}
<div class="box content is-medium otv">

<table id="drivers">


</table>
</div> 

<div class="box content is-medium otv">

    <table id="teams">
    
    
    </table>
</div> 


<script>

function generateTableHead(table, data, type) {
  let thead = table.createTHead();
  let row = thead.insertRow();
  let th = document.createElement("th");
    let text = document.createTextNode(type);
    th.appendChild(text);
    row.appendChild(th);
  

  for (let key of data) {
    let th = document.createElement("th");
    let text = document.createTextNode(key);
    th.appendChild(text);
    row.appendChild(th);
  }
}

function generateTable(table, data, range) {

   for (let i=1; i<range; i++){
    let row = table.insertRow();
    let cell = row.insertCell();
    let text = document.createTextNode(i);
    cell.appendChild(text);
    for (const [key, item] of Object.entries(data)){
        console.log(key)
        console.log(item)
        console.log(item[i]);
        let cell = row.insertCell();
        if (item[i] == "LOCKED"){
            const icon = document.createElement("ion-icon")
            icon.name = "lock-closed"
            icon.id = "lock"
            cell.appendChild(icon)
        }//udelat jeste locked
        else if (item[i]){
            let text = document.createTextNode(item[i]);
            cell.appendChild(text);
        }
        else
        {
            const icon = document.createElement("ion-icon")
            icon.name = "alert-circle"
            icon.id = "noguess"
            cell.appendChild(icon)

        }
    }
}
  
}

drivers_data = {{ data.DRIVER | tojson | safe}}
teamsdata = {{ data.TEAM | tojson | safe}}

console.log(drivers_data)
head_data = Object.keys(drivers_data);
let table_drivers = document.querySelector("#drivers");
generateTable(table_drivers, drivers_data, 21);
generateTableHead(table_drivers, head_data, "JEZDCI");

let table_teams = document.querySelector("#teams");
generateTable(table_teams, teamsdata, 11);
generateTableHead(table_teams, head_data, "KONSTRUKTÉŘI");

</script>
{% endblock %}


